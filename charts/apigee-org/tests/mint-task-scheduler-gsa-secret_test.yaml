# below comment needs to be present to detect invalid test schema
# yaml-language-server: $schema=https://raw.githubusercontent.com/quintush/helm-unittest/master/schema/helm-testsuite.json
suite: mint-task-scheduler-gsa-secret-test
templates:
- mint-task-scheduler-gsa-secret.yaml
release:
  name: test-release

tests:
- it: template should fail if file not found
  values:
    - test-values.yaml
  set:
    mintTaskScheduler.serviceAccountPath: missing-file.txt
  asserts:
    - failedTemplate:
        errorMessage: "'missing-file.txt' is either an empty file or unreachable"
- it: template should fail if file is empty
  values:
    - test-values.yaml
  set:
    mintTaskScheduler.serviceAccountPath: test-empty-file.txt
  asserts:
    - failedTemplate:
        errorMessage: "'test-empty-file.txt' is either an empty file or unreachable"